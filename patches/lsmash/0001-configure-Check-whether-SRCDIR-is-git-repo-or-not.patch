From ad3ae66a412301c448eac01daa5ee7ef48ad3e60 Mon Sep 17 00:00:00 2001
From: Yuta NAKAI <nak5124@live.jp>
Date: Sun, 31 Aug 2014 18:19:54 +0900
Subject: [PATCH 1/3] configure: Check whether SRCDIR is git repo or not.

This is for building from a released tarball.
---
 configure | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/configure b/configure
index 407243d..a28028a 100755
--- a/configure
+++ b/configure
@@ -299,7 +299,7 @@ MINVER=$(grep -e '#define LSMASH_VERSION_MINOR' lsmash.h|sed -e 's/#define LSMAS
 MICVER=$(grep -e '#define LSMASH_VERSION_MICRO' lsmash.h|sed -e 's/#define LSMASH_VERSION_MICRO //;s/ //g')
 VER=$MAJVER.$MINVER.$MICVER
 REV="$(git rev-list HEAD 2> /dev/null | wc -l)"
-if test $REV -ne 0; then
+if test -d .git && test $REV -ne 0; then
     VER_STRING="$VER rev.$REV"
 else
     VER_STRING="$VER"
-- 
2.1.0

