From 6d20a9967304bf80924f5661929098076275ad3f Mon Sep 17 00:00:00 2001
From: Johannes Schindelin <johannes.schindelin@gmx.de>
Date: Sun, 22 Mar 2015 12:51:51 +0000
Subject: [PATCH 22/26] Export the `kill_process_tree()` function

... for use in kill.exe.

Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>
---
 winsup/cygwin/common-msys.din          | 1 +
 winsup/cygwin/common.din               | 1 +
 winsup/cygwin/include/cygwin/signal.h  | 3 ++-
 winsup/cygwin/include/cygwin/version.h | 1 +
 4 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/winsup/cygwin/common-msys.din b/winsup/cygwin/common-msys.din
index d538100..d2583d4 100644
--- a/winsup/cygwin/common-msys.din
+++ b/winsup/cygwin/common-msys.din
@@ -33,6 +33,7 @@ sys_errlist = _sys_errlist DATA
 sys_nerr = _sys_nerr DATA
 sys_sigabbrev DATA
 sys_siglist DATA
+kill_process_tree DATA
 
 # Exported functions
 _Exit SIGFE
diff --git a/winsup/cygwin/common.din b/winsup/cygwin/common.din
index 71a0c9b..44a60dc 100644
--- a/winsup/cygwin/common.din
+++ b/winsup/cygwin/common.din
@@ -33,6 +33,7 @@ sys_errlist = _sys_errlist DATA
 sys_nerr = _sys_nerr DATA
 sys_sigabbrev DATA
 sys_siglist DATA
+kill_process_tree DATA
 
 # Exported functions
 _Exit SIGFE
diff --git a/winsup/cygwin/include/cygwin/signal.h b/winsup/cygwin/include/cygwin/signal.h
index 73cfa47..ead45a1 100644
--- a/winsup/cygwin/include/cygwin/signal.h
+++ b/winsup/cygwin/include/cygwin/signal.h
@@ -420,11 +420,12 @@ int siginterrupt (int, int);
 #ifdef __INSIDE_CYGWIN__
 extern const char *sys_sigabbrev[];
 extern const char *sys_siglist[];
+extern void kill_process_tree(pid_t pid, int sig);
 #else
 extern const char __declspec(dllimport) *sys_sigabbrev[];
 extern const char __declspec(dllimport) *sys_siglist[];
+extern void __declspec(dllimport) kill_process_tree(pid_t pid, int sig);
 #endif
-void kill_process_tree(pid_t pid, int sig);
 
 #ifdef __cplusplus
 }
diff --git a/winsup/cygwin/include/cygwin/version.h b/winsup/cygwin/include/cygwin/version.h
index 8181b01..36f1e13 100644
--- a/winsup/cygwin/include/cygwin/version.h
+++ b/winsup/cygwin/include/cygwin/version.h
@@ -472,6 +472,7 @@ details. */
       288: Export getcontext, makecontext, setcontext, swapcontext.
       289: Export sigsetjmp, siglongjmp.
       290: Add sysconf cache handling.
+      291: Export kill_process_tree.
      */
 
      /* Note that we forgot to bump the api for ualarm, strtoll, strtoull,
-- 
2.5.2

